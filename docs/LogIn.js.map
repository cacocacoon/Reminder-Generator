{"version":3,"sources":["webpack:///./src/containers/Modals/LogIn.js","webpack:///./src/components/Modals/LogIn.js"],"names":["Object","react_redux__WEBPACK_IMPORTED_MODULE_0__","state","open","getIn","enableLogInButton","email","password","dispatch","componentWillMount","_firebase_firebase__WEBPACK_IMPORTED_MODULE_2__","auth","onAuthStateChanged","user","_actions__WEBPACK_IMPORTED_MODULE_3__","console","log","logIn","trim","onChangeEmail","event","target","value","onChangePassword","openModal","closeModal","_components_Modals_LogIn__WEBPACK_IMPORTED_MODULE_1__","__webpack_exports__","LogIn","react__WEBPACK_IMPORTED_MODULE_0___default","a","Component","this","props","render","actions","createElement","material_ui_FlatButton__WEBPACK_IMPORTED_MODULE_2___default","key","label","primary","disabled","onTouchTap","material_ui_Dialog__WEBPACK_IMPORTED_MODULE_1___default","title","modal","contentStyle","width","material_ui_TextField__WEBPACK_IMPORTED_MODULE_3___default","hintText","floatingLabelText","onChange","type","[object Object]","code","eval"],"mappings":"uLAYeA,OAAAC,EAAA,QAAAD,CACbE,IAQA,OANCC,KAAMD,EAAME,OAAO,KAAM,QAAS,gBAClCC,kBAAmBH,EAAME,OAAO,KAAM,QAAS,sBAC/CE,MAAOJ,EAAME,OAAO,OAAQ,QAAS,UACrCG,SAAUL,EAAME,OAAO,OAAQ,QAAS,eAMzCI,KACAC,mBAAoB,CAACN,GAAO,KAG3BO,EAAA,EAASC,OAAOC,mBAAoBC,IAC/BA,GAAQV,IACXK,EAASR,OAAAc,EAAA,EAAAd,IACTe,QAAQC,IAAI,QAASH,EAAKP,QAEvBO,GAASV,IACZK,EAASR,OAAAc,EAAA,EAAAd,IACTe,QAAQC,IAAI,WAKfC,MAAO,CAACX,EAAOC,IAAa,KAC3BC,EAASR,OAAAc,EAAA,EAAAd,CAAcM,EAAMY,OAAQX,EAASW,UAG/CC,cAAgBC,IACfZ,EAASR,OAAAc,EAAA,EAAAd,EACRM,MAAOc,EAAMC,OAAOC,UAItBC,iBAAkBH,IACjBZ,EAASR,OAAAc,EAAA,EAAAd,EACRO,SAAUa,EAAMC,OAAOC,UAIzBE,UAAW,KACVhB,EAASR,OAAAc,EAAA,EAAAd,KAGVyB,WAAY,KACXjB,EAASR,OAAAc,EAAA,EAAAd,OAjDGA,CAoDb0B,EAAA,WApDFC,EAAA,2nCCPMC,cAAcC,2CAAAC,EAAMC,UAEzBtB,qBACCuB,KAAKC,MAAMxB,mBAAmBuB,KAAKC,MAAM9B,MAG1C+B,SACC,MAAM/B,KACLA,EADKE,kBAELA,EAFKY,MAGLA,EAHKX,MAILA,EAJKC,SAKLA,EALKY,cAMLA,EANKI,iBAOLA,EAPKC,UAQLA,EARKC,WASLA,GACGO,KAAKC,MAEHE,GACLN,2CAAAC,EAAAM,cAACC,4DAAAP,GACAQ,IAAI,cACJC,MAAM,KACNC,SAAS,EACTC,UAAWpC,EACXqC,WAAYzB,EAAMX,EAAOC,MAI3B,OACCsB,2CAAAC,EAAAM,cAAA,WACCP,2CAAAC,EAAAM,cAACO,wDAAAb,GACAc,MAAM,KACNT,QAASA,EACTU,OAAO,EACP1C,KAAMA,EACN2C,cAAeC,MAAO,UAEtBlB,2CAAAC,EAAAM,cAACY,2DAAAlB,GACAmB,SAAS,cACTC,kBAAkB,KAClB5B,MAAOhB,EACP6C,SAAUhC,IAEXU,2CAAAC,EAAAM,cAAA,WACAP,2CAAAC,EAAAM,cAACY,2DAAAlB,GACAmB,SAAS,SACTC,kBAAkB,KAClBE,KAAK,WACL9B,MAAOf,EACP4C,SAAU5B,IAEXM,2CAAAC,EAAAM,cAAA,aApD+BiB,iCAAAf,IAAAgB,MAAAtB,KAAAM,KAAAiB,KAAAD,sBA2DrB1B,qCAAfD,oBAAA,iJA3DMC","file":"LogIn.js","sourcesContent":["import {connect} from 'react-redux';\nimport LogIn from '../../components/Modals/LogIn';\nimport firebase from '../../firebase/firebase';\n\nimport {\n\tcloseLogInModal,\n\topenLogInModal,\n\tchangeEmail,\n\tchangePassword,\n\tlogInFireBase,\n} from '../../actions';\n\nexport default connect(\n\t(state) => {\n\t\tlet stateMap = {\n\t\t\topen: state.getIn(['ui', 'logIn', 'modalIsOpen']),\n\t\t\tenableLogInButton: state.getIn(['ui', 'logIn', 'enableLogInButton']),\n\t\t\temail: state.getIn(['data', 'logIn', 'email']),\n\t\t\tpassword: state.getIn(['data', 'logIn', 'password']),\n\t\t};\n\n\t\treturn stateMap;\n\t},\n\n\t(dispatch) => ({\n\t\tcomponentWillMount: (open = true) => {\n\t\t\t// firebaseAuth.signOut();\n\t\t\t// return ;\n\t\t\tfirebase.auth().onAuthStateChanged((user) => {\n\t\t\t\tif (user && open) {// 已登入, 且 modal 是打開的狀態才要關掉 modal\n\t\t\t\t\tdispatch(closeLogInModal());\n\t\t\t\t\tconsole.log('已登入: ', user.email);\n\t\t\t\t}\n\t\t\t\tif(!user && !open) {// 未登入, 且 modal 是沒打開的才要開啟 modal\n\t\t\t\t\tdispatch(openLogInModal());\n\t\t\t\t\tconsole.log('已登出');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tlogIn: (email, password) => () => {\n\t\t\tdispatch(logInFireBase(email.trim(), password.trim()));\n\t\t},\n\n\t\tonChangeEmail: (event) => {\n\t\t\tdispatch(changeEmail({\n\t\t\t\temail: event.target.value\n\t\t\t}));\n\t\t},\n\n\t\tonChangePassword:(event) => {\n\t\t\tdispatch(changePassword({\n\t\t\t\tpassword: event.target.value\n\t\t\t}));\n\t\t},\n\n\t\topenModal: () => {\n\t\t\tdispatch(openLogInModal());\n\t\t},\n\n\t\tcloseModal: () => {\n\t\t\tdispatch(closeLogInModal());\n\t\t}\n\t})\n)(LogIn);\n","import React from 'react';\nimport Dialog from 'material-ui/Dialog';\nimport FlatButton from 'material-ui/FlatButton';\nimport TextField from 'material-ui/TextField';\n\nclass LogIn extends React.Component {\n\n\tcomponentWillMount() {\n\t\tthis.props.componentWillMount(this.props.open);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\topen,\n\t\t\tenableLogInButton,\n\t\t\tlogIn,\n\t\t\temail,\n\t\t\tpassword,\n\t\t\tonChangeEmail,\n\t\t\tonChangePassword,\n\t\t\topenModal,\n\t\t\tcloseModal\n\t\t} = this.props;\n\n\t\tconst actions = [\n\t\t\t<FlatButton\n\t\t\t\tkey=\"flat-button\"\n\t\t\t\tlabel=\"登入\"\n\t\t\t\tprimary={true}\n\t\t\t\tdisabled={!enableLogInButton}\n\t\t\t\tonTouchTap={logIn(email, password)}\n\t\t\t\t/>,\n\t\t];\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Dialog\n\t\t\t\t\ttitle=\"登入\"\n\t\t\t\t\tactions={actions}\n\t\t\t\t\tmodal={true}\n\t\t\t\t\topen={open}\n\t\t\t\t\tcontentStyle={{width: '325px'}}\n\t\t\t\t\t>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\thintText=\"luke@ppt.cc\"\n\t\t\t\t\t\tfloatingLabelText=\"信箱\"\n\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\tonChange={onChangeEmail}\n\t\t\t\t\t/>\n\t\t\t\t\t<br />\n\t\t\t\t\t<TextField\n\t\t\t\t\t\thintText=\"XXXXXX\"\n\t\t\t\t\t\tfloatingLabelText=\"密碼\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\tonChange={onChangePassword}\n\t\t\t\t\t/>\n\t\t\t\t\t<br />\n\t\t\t\t</Dialog>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default LogIn;\n"],"sourceRoot":""}